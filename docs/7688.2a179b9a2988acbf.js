"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7688],{7688:(D,d,s)=>{s.r(d),s.d(d,{MemberListPage:()=>_});var f=s(1635),e=s(2716),h=s(9360),c=s(4341),b=s(9894),l=s(8974),g=s(9553),F=s(9334),v=s(5734),C=s(9525),M=s(161),j=s(9131);const y=[{id:1,councilName:"Nationalrat"},{id:2,councilName:"St\xe4nderat"},{id:99,councilName:"Bundesrat"}];function P(n,i){if(1&n&&(e.j41(0,"ion-item")(1,"ion-checkbox",4),e.EFF(2),e.k0s()()),2&n){const t=i.$index,r=e.XpG();e.R7$(),e.Y8G("formControlName",t),e.R7$(),e.JRh(r.councilList[t].councilName)}}function k(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",3)(1,"ion-button",5),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onSubmit())}),e.EFF(2,"Filter anwenden"),e.k0s()()}}let x=(()=>{var n;class i{constructor(r){this.fb=r,this.preset=(0,e.hFB)(),this.councilList=y,this.filterForm=new c.gE({councils:new c.Yp([]),inactiveMembers:new c.MJ(!1)}),this.applyFilter=new e.bkB}ngOnInit(){var r,o;this.filterForm=this.fb.group({councils:this.fb.array([...this.councilList.map(a=>{var p,u;return this.fb.control(null!==(p=null===(u=this.preset())||void 0===u?void 0:u.councils.includes(a))&&void 0!==p&&p)})]),inactiveMembers:new c.MJ(null!==(r=null===(o=this.preset())||void 0===o?void 0:o.inactiveMembers)&&void 0!==r&&r)})}onSubmit(){const r=this.filterForm.value.councils.map((o,a)=>o?this.councilList[a]:null).filter(o=>null!==o);this.applyFilter.emit({councils:r,inactiveMembers:this.filterForm.get("inactiveMembers").value})}get councils(){return this.filterForm.get("councils")}}return(n=i).\u0275fac=function(r){return new(r||n)(e.rXU(c.ok))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-council-member-filter-form"]],inputs:{preset:[1,"preset"]},outputs:{applyFilter:"applyFilter"},standalone:!0,features:[e.aNF],decls:15,vars:2,consts:[[3,"formGroup"],["formArrayName","councils"],["label-placement","start","formControlName","inactiveMembers"],[1,"floating-button"],["label-placement","start",3,"formControlName"],["expand","block",3,"click"]],template:function(r,o){1&r&&(e.j41(0,"form",0)(1,"h3"),e.EFF(2,"Rat"),e.k0s(),e.j41(3,"ion-list",1),e.Z7z(4,P,3,2,"ion-item",null,e.fX1),e.k0s(),e.j41(6,"h3"),e.EFF(7,"Weitere Filter"),e.k0s(),e.j41(8,"ion-list")(9,"ion-item")(10,"ion-toggle",2),e.EFF(11,"Inaktive anzeigen*"),e.k0s()()(),e.j41(12,"small"),e.EFF(13,"*Ehemalige Ratsmitglieder"),e.k0s()(),e.DNE(14,k,3,0,"div",3)),2&r&&(e.Y8G("formGroup",o.filterForm),e.R7$(4),e.Dyx(o.councils.controls),e.R7$(10),e.vxM(o.filterForm.dirty?14:-1))},dependencies:[l.bv,l.Jm,l.eY,l.uz,l.nf,l.BY,l.hB,c.X1,c.qT,c.BC,c.cb,c.j4,c.JD,c.v8],styles:["form[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:1rem}.floating-button[_ngcontent-%COMP%]{position:fixed;bottom:1rem;left:0;right:0;z-index:999}"]}),i})();var m;const R=["searchBar"];function E(n,i){if(1&n&&(e.j41(0,"ion-chip")(1,"ion-label"),e.EFF(2),e.k0s()()),2&n){const t=i.$implicit;e.R7$(2),e.JRh(t.councilName)}}function L(n,i){1&n&&(e.j41(0,"ion-chip")(1,"ion-label"),e.EFF(2,"Inaktive anzeigen"),e.k0s()())}function N(n,i){if(1&n&&(e.j41(0,"div",3),e.Z7z(1,E,3,1,"ion-chip",null,e.fX1),e.DNE(3,L,3,0,"ion-chip"),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Dyx(t.activeFilter.councils),e.R7$(2),e.vxM(t.activeFilter.inactiveMembers?3:-1)}}function T(n,i){if(1&n){const t=e.RV6();e.j41(0,"app-council-member-card",9),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(4);return e.Njj(a.onClickPerson(o.ID))}),e.k0s()}2&n&&e.Y8G("councilMember",i.$implicit)}function B(n,i){if(1&n){const t=e.RV6();e.j41(0,"ion-refresher",6),e.bIt("ionRefresh",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.handleRefresh(o))}),e.nrm(1,"ion-refresher-content"),e.k0s(),e.Z7z(2,T,1,1,"app-council-member-card",7,e.fX1),e.j41(4,"ion-infinite-scroll",8),e.bIt("ionInfinite",function(o){e.eBV(t);const a=e.XpG(3);return e.Njj(a.distanceReached(o))}),e.nrm(5,"ion-infinite-scroll-content"),e.k0s()}if(2&n){const t=e.XpG(3);e.R7$(2),e.Dyx(t.store.councilMembers())}}function G(n,i){if(1&n){const t=e.RV6();e.j41(0,"app-no-content-screen",10),e.bIt("resetFilter",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.resetFilter())}),e.k0s()}}function X(n,i){if(1&n&&e.DNE(0,B,6,0)(1,G,1,0,"app-no-content-screen"),2&n){const t=e.XpG(2);e.vxM(t.store.hasNoContent()?1:0)}}function I(n,i){if(1&n){const t=e.RV6();e.j41(0,"app-error-screen",11),e.bIt("retry",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.retrySearch())}),e.k0s()}}function V(n,i){if(1&n&&e.DNE(0,X,2,1)(1,I,1,0,"app-error-screen"),2&n){const t=e.XpG();e.vxM(t.store.hasError()?1:0)}}function $(n,i){1&n&&e.nrm(0,"app-loading-screen")}function O(n,i){if(1&n){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Ratsmitglieder filtern"),e.k0s(),e.j41(4,"ion-buttons",12)(5,"ion-button",13),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleFilterModal())}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content",14)(8,"app-council-member-filter-form",15),e.bIt("applyFilter",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.onFilter(o))}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(8),e.Y8G("preset",t.activeFilter)}}let _=((m=class{constructor(){this.store=(0,e.WQX)(j.b),this.router=(0,e.WQX)(h.Ix),this.isModalOpen=!1,this.presentingElement=null,this.activeFilter={councils:[],inactiveMembers:!1},(0,e.QZP)(()=>{var i;this.store.isLoadingMore()||this.store.isRefreshing()||null===(i=this.refreshOrLoadMoreEvent)||void 0===i||null===(i=i.target)||void 0===i||i.complete().catch(()=>{console.error("Error completing refresh or load more event")})})}ngOnInit(){this.store.loadCouncilMembers(this.store.query),this.presentingElement=document.querySelector("ion-router-outlet")}toggleFilterModal(){this.isModalOpen=!this.isModalOpen}onSearch(i){this.store.updateQuery({...this.store.query(),searchTerm:i.target.value})}retrySearch(){this.store.loadCouncilMembers(this.store.query)}resetFilter(){this.searchBar.value="",this.store.resetQuery()}distanceReached(i){this.refreshOrLoadMoreEvent=i,this.store.loadMore()}handleRefresh(i){this.refreshOrLoadMoreEvent=i,this.store.refresh()}onFilter(i){this.activeFilter=i,this.toggleFilterModal(),this.store.updateQuery({...this.store.query(),council:this.activeFilter.councils.map(t=>t.id),showInactive:this.activeFilter.inactiveMembers})}onClickPerson(i){this.router.navigate(["council-member","detail",i])}}).\u0275fac=function(i){return new(i||m)},m.\u0275cmp=e.VBU({type:m,selectors:[["app-member-list"]],viewQuery:function(i,t){if(1&i&&e.GBs(R,5),2&i){let r;e.mGM(r=e.lsd())&&(t.searchBar=r.first)}},standalone:!0,features:[e.aNF],decls:14,vars:4,consts:[["searchBar",""],["appHideKeyboardOnEnter","","color","light","placeholder","Suche","enterkeyhint","search",3,"ionChange"],["slot","end","size","large","name","filter-outline",3,"click"],[1,"active-filter-wrapper"],["role","feed",1,"ion-padding"],["handle","true",3,"isOpen","presentingElement"],["slot","fixed",3,"ionRefresh"],[3,"councilMember"],["threshold","100px",3,"ionInfinite"],[3,"click","councilMember"],[3,"resetFilter"],[3,"retry"],["slot","end"],[3,"click"],[1,"ion-padding"],[3,"applyFilter","preset"]],template:function(i,t){if(1&i){const r=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3," Ratsmitglieder "),e.k0s()(),e.j41(4,"ion-toolbar")(5,"ion-searchbar",1,0),e.bIt("ionChange",function(a){return e.eBV(r),e.Njj(t.onSearch(a))}),e.k0s(),e.j41(7,"ion-icon",2),e.bIt("click",function(){return e.eBV(r),e.Njj(t.toggleFilterModal())}),e.k0s()(),e.DNE(8,N,4,1,"div",3),e.k0s(),e.j41(9,"ion-content",4),e.DNE(10,V,2,1)(11,$,1,0,"app-loading-screen"),e.k0s(),e.j41(12,"ion-modal",5),e.DNE(13,O,9,1,"ng-template"),e.k0s()}2&i&&(e.R7$(8),e.vxM(t.store.query().council.length>0||t.store.query().showInactive?8:-1),e.R7$(2),e.vxM(t.store.isLoading()?11:10),e.R7$(2),e.Y8G("isOpen",t.isModalOpen)("presentingElement",t.presentingElement))},dependencies:[l.bv,l.Jm,l.QW,l.ZB,l.W9,l.eU,l.iq,l.Ax,l.Hp,l.he,l.To,l.Ki,l.S1,l.BC,l.ai,l.Sb,l.Gw,c.X1,F.Z,g.q,v.K,C._,M._,x],styles:["ion-toolbar[_ngcontent-%COMP%]{--padding-end: 1rem}ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-color-step-150);--color: var(--ion-color-secondary-contrast)}ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]::part(native){color:var(--ion-color-primary)}.active-filter-wrapper[_ngcontent-%COMP%]{padding:.5rem 1rem 0;background-color:var(--ion-color-primary-contrast)}"]}),m);_=(0,f.Cg)([(0,b.d)()],_)}}]);