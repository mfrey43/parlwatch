"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8082],{9650:(D,C,i)=>{i.d(C,{H:()=>T});var e=i(2716),P=i(345);let d=(()=>{var o;class p{constructor(c){this.sanitized=c}transform(c){const u=document.createElement("div");u.innerHTML=c;const M=["strong","p","ul","li","i","a"],t=Array.from(u.getElementsByTagName("*"));for(const f of t)if(-1===M.indexOf(f.tagName.toLowerCase())){const E=f.parentNode;for(;f.firstChild;)E.insertBefore(f.firstChild,f);E.removeChild(f)}return this.sanitized.bypassSecurityTrustHtml(u.innerHTML)}}return(o=p).\u0275fac=function(c){return new(c||o)(e.rXU(P.up,16))},o.\u0275pipe=e.EJ8({name:"safeHtml",type:o,pure:!0,standalone:!0}),p})();const g=["*"];function v(o,p){if(1&o&&(e.j41(0,"div",2),e.EFF(1),e.k0s()),2&o){const _=e.XpG();e.R7$(),e.JRh(_.title)}}function m(o,p){if(1&o&&(e.j41(0,"small"),e.EFF(1),e.k0s()),2&o){const _=e.XpG();e.R7$(),e.SpI("",_.subtitle," ")}}function x(o,p){if(1&o&&(e.nrm(0,"p",3),e.nI1(1,"safeHtml")),2&o){const _=e.XpG();e.Y8G("innerHTML",e.bMT(1,1,_.HtmlText),e.npT)}}let T=(()=>{var o;class p{constructor(){}}return(o=p).\u0275fac=function(c){return new(c||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-text-card"]],inputs:{title:"title",subtitle:"subtitle",HtmlText:"HtmlText"},standalone:!0,features:[e.aNF],ngContentSelectors:g,decls:6,vars:3,consts:[[1,"text-card"],[1,"text-card-content"],[1,"text-card-title"],[1,"text-card-description",3,"innerHTML"]],template:function(c,u){1&c&&(e.NAR(),e.j41(0,"div",0)(1,"div",1),e.DNE(2,v,2,1,"div",2)(3,m,2,1,"small")(4,x,2,3,"p",3),e.SdG(5),e.k0s()()),2&c&&(e.R7$(2),e.vxM(u.title?2:-1),e.R7$(),e.vxM(u.subtitle?3:-1),e.R7$(),e.vxM(u.HtmlText?4:-1))},dependencies:[d],styles:[".text-card[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 4px 16px #0000001f;overflow:hidden;background:#fff;margin:0 0 .5rem 0rem}.text-card-content[_ngcontent-%COMP%]{padding:1.25rem}.text-card-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:last-child{margin-bottom:0}.text-card-title[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.4px;font-weight:700;color:var(--ion-color-primary)}.text-card-description[_ngcontent-%COMP%]{font-size:16px;line-height:22.4px;color:#666}small[_ngcontent-%COMP%]{color:#666}"]}),p})()},3475:(D,C,i)=>{i.d(C,{J:()=>P});var e=i(2716);let P=(()=>{var d;class g{constructor(){}transform(m){if(!m)return m;const x=parseInt(m.replace("/Date(","").replace(")/",""),10);return new Date(x).toLocaleDateString("de-CH")}}return(d=g).\u0275fac=function(m){return new(m||d)},d.\u0275pipe=e.EJ8({name:"oDataDateTime",type:d,pure:!0,standalone:!0}),g})()},1645:(D,C,i)=>{i.r(C),i.d(C,{VoteListPage:()=>S});var e=i(8141),P=i(5558),d=i(9437),g=i(1594),v=i(4412),m=i(1413),x=i(4572),T=i(7673),o=i(8974),p=i(9553),_=i(3907),c=i(5734),u=i(161),M=i(9525),t=i(2716),f=i(8941),E=i(9360);const O=["searchBar"];function L(r,h){if(1&r){const a=t.RV6();t.j41(0,"app-vote-card",6),t.bIt("click",function(){const s=t.eBV(a).$implicit,l=t.XpG(4);return t.Njj(l.onClickVote(s.ID))}),t.k0s()}2&r&&t.Y8G("vote",h.$implicit)}function V(r,h){if(1&r){const a=t.RV6();t.j41(0,"ion-refresher",3),t.bIt("ionRefresh",function(s){t.eBV(a);const l=t.XpG(3);return t.Njj(l.handleRefresh(s))}),t.nrm(1,"ion-refresher-content"),t.k0s(),t.Z7z(2,L,1,1,"app-vote-card",4,t.fX1),t.j41(4,"ion-infinite-scroll",5),t.bIt("ionInfinite",function(s){t.eBV(a);const l=t.XpG(3);return t.Njj(l.distanceReached(s))}),t.nrm(5,"ion-infinite-scroll-content"),t.k0s()}if(2&r){const a=t.XpG(3);t.R7$(2),t.Dyx(a.votes)}}function R(r,h){if(1&r){const a=t.RV6();t.j41(0,"app-no-content-screen",7),t.bIt("resetFilter",function(){t.eBV(a);const s=t.XpG(3);return t.Njj(s.resetFilter())}),t.k0s()}}function B(r,h){if(1&r&&t.DNE(0,V,6,0)(1,R,1,0,"app-no-content-screen"),2&r){const a=t.XpG(2);t.vxM(a.noContent?1:0)}}function j(r,h){if(1&r){const a=t.RV6();t.j41(0,"app-error-screen",8),t.bIt("retry",function(){t.eBV(a);const s=t.XpG(2);return t.Njj(s.retrySearch())}),t.k0s()}}function I(r,h){if(1&r&&t.DNE(0,B,2,1)(1,j,1,0,"app-error-screen"),2&r){const a=t.XpG();t.vxM(a.error?1:0)}}function y(r,h){1&r&&t.nrm(0,"app-loading-screen")}let S=(()=>{var r;class h{constructor(n,s,l){this.voteService=n,this.router=s,this.route=l,this.top=10,this.skip=0,this.votes=[],this.loading=!0,this.error=!1,this.noContent=!1,this.searchTerm$=new v.t(""),this.trigger$=new m.B}ngOnInit(){(0,x.z)([this.searchTerm$,this.trigger$]).pipe((0,e.M)(()=>{this.skip=0,this.error=!1,this.loading=!0}),(0,P.n)(([n])=>this.voteService.getVotes({top:this.top,skip:this.skip,searchTerm:n}).pipe((0,d.W)(()=>(this.error=!0,this.loading=!1,(0,T.of)(null)))))).subscribe(n=>{null!==n&&(this.votes=n,this.noContent=0===n.length,this.loading=!1)})}ionViewDidEnter(){0===this.votes.length&&this.trigger$.next();const n=+this.route.snapshot.queryParams.BusinessShortNumber;n&&(this.router.navigate([],{relativeTo:this.route,queryParams:{BusinessShortNumber:null},queryParamsHandling:"merge"}),this.searchBar.value=n.toString(),this.searchTerm$.next(n.toString()))}retrySearch(){this.trigger$.next()}onSearch(n){this.searchTerm$.next(n.target.value)}resetFilter(){this.searchTerm$.next(""),this.searchBar.value=""}distanceReached(n){this.skip+=this.top,this.fetchVotes().subscribe(s=>{null!==s&&(this.votes=[...this.votes,...s],n.target.complete())})}handleRefresh(n){this.skip=0,this.fetchVotes().subscribe(s=>{null!==s&&(this.votes=s,n.target.complete())})}fetchVotes(){return this.voteService.getVotes({top:this.top,skip:this.skip,searchTerm:this.searchTerm$.getValue()}).pipe((0,g.$)(),(0,d.W)(()=>(this.error=!0,(0,T.of)(null))))}onClickVote(n){this.router.navigate(["votes","detail",n])}getSubtitle(n){return n.Subject?`${n.SessionName} - ${n.Subject}`:n.SessionName}}return(r=h).\u0275fac=function(n){return new(n||r)(t.rXU(f.Q),t.rXU(E.Ix),t.rXU(E.nX))},r.\u0275cmp=t.VBU({type:r,selectors:[["app-vote-list"]],viewQuery:function(n,s){if(1&n&&t.GBs(O,5),2&n){let l;t.mGM(l=t.lsd())&&(s.searchBar=l.first)}},standalone:!0,features:[t.aNF],decls:10,vars:1,consts:[["searchBar",""],["appHideKeyboardOnEnter","","placeholder","Suche","color","light","enterkeyhint","search",3,"ionChange"],["role","feed",1,"ion-padding"],["slot","fixed",3,"ionRefresh"],[3,"vote"],["threshold","100px",3,"ionInfinite"],[3,"click","vote"],[3,"resetFilter"],[3,"retry"]],template:function(n,s){if(1&n){const l=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3," Abstimmungen "),t.k0s()(),t.j41(4,"ion-toolbar")(5,"ion-searchbar",1,0),t.bIt("ionChange",function(b){return t.eBV(l),t.Njj(s.onSearch(b))}),t.k0s()()(),t.j41(7,"ion-content",2),t.DNE(8,I,2,1)(9,y,1,0,"app-loading-screen"),t.k0s()}2&n&&(t.R7$(8),t.vxM(s.loading?9:8))},dependencies:[o.bv,o.W9,o.eU,o.Ax,o.Hp,o.To,o.Ki,o.S1,o.BC,o.ai,o.Gw,_.y,p.q,c.K,u._,M._],styles:["ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-color-step-150);--color: var(--ion-color-secondary-contrast)}.floating-button[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:999}"]}),h})()}}]);